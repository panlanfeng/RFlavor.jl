A = reshape(1:24, (4,3,2))
@test sweep(A, 1, 1:4)[:,:,1]==[0 4 8; 0 4 8; 0 4 8; 0 4 8]
@test sweep(A, 1, [5])[:,:,1]==[-4 0 4; -3 1 5; -2 2 6; -1 3 7]
Amin=mapslices(minimum, A, (2,3))
@test sweep(A, 1, Amin)[:,:,2]==[12 16 20; 12 16 20; 12 16 20; 12 16 20]

Amedian=mapslices(median, A, 3)
@test sweep(A, 1:2, Amedian)[:,:,1]==[-6.0 -6.0 -6.0; -6.0 -6.0 -6.0; -6.0 -6.0 -6.0; -6.0 -6.0 -6.0]

@test sweep(A, (1,2), Amedian)[:,:,1]==[-6.0 -6.0 -6.0; -6.0 -6.0 -6.0; -6.0 -6.0 -6.0; -6.0 -6.0 -6.0]
x = hcat(ones(10), collect(1:10))
@test RFlavor.sweep(x, 2, mean(x,1)) == [0.0 -4.5; 0.0 -3.5; 0.0 -2.5; 0.0 -1.5; 0.0 -0.5; 0.0 0.5; 0.0 1.5; 0.0 2.5; 0.0 3.5; 0.0 4.5]

@test RFlavor.sweep(x, 2, 2.0) == [-1.0 -1.0; -1.0 0.0; -1.0 1.0; -1.0 2.0; -1.0 3.0; -1.0 4.0; -1.0 5.0; -1.0 6.0; -1.0 7.0; -1.0 8.0]
